{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport * as d3 from 'd3';\nimport cloud from 'd3-cloud';\nexport default {\n  props: {\n    items: {\n      type: Object,\n      require: true\n    }\n  },\n  data() {\n    return {\n      isModal: false,\n      consReviews: [],\n      consKeyWord: ''\n    };\n  },\n  watch: {\n    items: {\n      handler() {\n        this.createWordClouds();\n      },\n      deep: true\n    }\n  },\n  methods: {\n    createWordClouds() {\n      this.createWordCloud('#word-cloud-1', this.items.map(item => ({\n        text: item.PositiveKeyword,\n        size: item.PositiveRating * 2\n      })));\n      this.createWordCloud('#word-cloud-2', this.items.map(item => ({\n        text: item.NegativeKeyword,\n        size: item.NegativeRating * 2\n      })));\n    },\n    createWordCloud(containerId, words) {\n      const width = window.innerWidth;\n      const height = 400;\n      const layout = cloud().size([width, height]).words(words).padding(10).rotate(() => 0).font(\"Impact\").fontSize(d => d.size * 10).on(\"end\", words => this.draw(containerId, words));\n      layout.start();\n    },\n    draw(containerId, words) {\n      const width = window.innerWidth;\n      const height = 400;\n      const svg = d3.select(containerId).append(\"svg\").attr(\"width\", width).attr(\"height\", height).append(\"g\").attr(\"transform\", `translate(${width / 2}, ${height / 2})`);\n      svg.selectAll(\"text\").data(words).enter().append(\"text\").style(\"font-size\", d => d.size + \"px\").style(\"font-family\", \"Impact\").style(\"fill\", containerId === '#word-cloud-1' ? 'DodgerBlue' : 'Red').attr(\"text-anchor\", \"middle\").attr(\"transform\", d => `translate(${[d.x, d.y]})`).text(function (d) {\n        return d.text;\n      }).style(\"border\", \"1px solid black\").on(\"click\", (event, d) => {\n        if (containerId === '#word-cloud-2') {\n          this.fetchReviews(d.text);\n          this.isModal = true;\n        } else {\n          // 장점 클릭 시 다른 처리\n          this.$router.push({\n            name: 'similarItems',\n            query: {\n              KeyWord: d.text\n            }\n          });\n        }\n      });\n    },\n    close() {\n      this.isModal = false;\n    },\n    fetchReviews(text) {\n      this.consKeyWord = text;\n      const getConsKeyWordReviews = `http://192.168.0.213:3000/api/review/getConsKeyWordReviews/`;\n      axios.get(getConsKeyWordReviews, {\n        params: {\n          \"itemId\": this.$store.state.itemId,\n          \"keyWord\": text\n        }\n      }).then(response => {\n        this.consReviews = response.data.results;\n        console.log(this.consReviews);\n      }).catch(error => {\n        console.error('API 요청 중 오류 발생:', error);\n        // Consider updating the UI to inform the user about the error\n      });\n    },\n\n    openModal() {\n      // Logic for opening the modal\n      this.isModal = true;\n      document.body.classList.add('modal-open');\n    },\n    closeModal() {\n      // Merged logic for closing the modal\n      this.isModal = false;\n      document.body.classList.remove('modal-open');\n      // Include any additional logic from the duplicated method here\n    }\n  }\n};","map":{"version":3,"names":["axios","d3","cloud","props","items","type","Object","require","data","isModal","consReviews","consKeyWord","watch","handler","createWordClouds","deep","methods","createWordCloud","map","item","text","PositiveKeyword","size","PositiveRating","NegativeKeyword","NegativeRating","containerId","words","width","window","innerWidth","height","layout","padding","rotate","font","fontSize","d","on","draw","start","svg","select","append","attr","selectAll","enter","style","x","y","event","fetchReviews","$router","push","name","query","KeyWord","close","getConsKeyWordReviews","get","params","$store","state","itemId","then","response","results","console","log","catch","error","openModal","document","body","classList","add","closeModal","remove"],"sources":["/Users/jinsanghyeok/Desktop/swe-2023/Project/frontend/src/components/WordCloud.vue"],"sourcesContent":["<template>\n    <div class=\"word-cloud-container\">\n        <div id=\"word-cloud-1\">\n            <div class=\"fs-1 fw-bold\">장점</div>\n        </div>\n        <div id=\"word-cloud-2\">\n            <div class=\"fs-1 fw-bold\">단점</div>\n        </div>\n    </div>\n    <div class=\"modal-container\" v-show=\"isModal\" @click.self=\"close\">\n        <div class=\"headMenu container-fluid text-center p-3\">\n            <div class=\"row justify-content-evenly\">\n                <div class=\"col d-flex justify-content-start\" @click=\"close\" @click.stop=\"\">\n                    <img src=\"../assets/icons/backward.png\" class=\"iconWidth\">\n                </div>\n                <div class=\"col d-flex justify-content-center\" style=\"font-size: 17px; font-weight: lighter;\">\n                    {{ keyWord }} 포함 리뷰\n                </div>\n                <div class=\"col\">\n                </div>\n            </div>\n        </div>\n        <div class=\"review p-3\" v-for=\"consReview in consReviews\" :key=\"consReview.ReviewID\">\n            <div class=\"\">\n                <div class=\"userInfo d-flex align-items-start text-start\">\n                    <img class=\"profile\" :src=\"require('@/assets/icons/user.png')\">\n                    <div class=\"babyInfo mb-2\">\n                        <div class=\"userName\">유저 {{ consReview.UserID }}</div>\n                        <div class=\"baby\">만 2세 <span>&#183;</span> 민감성 <span>&#183;</span> 여아</div>\n                        <svg v-for=\"i in 5\" :key=\"i\" width=\"12\" height=\"12\" viewBox=\"0 0 24 24\">\n                            <path :fill=\"i <= consReview.Rating ? 'gold' : '#ccc'\"\n                                d=\"M23.836,8.794a3.179,3.179,0,0,0-3.067-2.226H16.4L15.073,2.432a3.227,3.227,0,0,0-6.146,0L7.6,6.568H3.231a3.227,3.227,0,0,0-1.9,5.832L4.887,15,3.535,19.187A3.178,3.178,0,0,0,4.719,22.8a3.177,3.177,0,0,0,3.8-.019L12,20.219l3.482,2.559a3.227,3.227,0,0,0,4.983-3.591L19.113,15l3.56-2.6A3.177,3.177,0,0,0,23.836,8.794Z\" />\n                        </svg>\n                    </div>\n                </div>\n            </div>\n            <div class=\"reviewContainer\">\n                <img class=\"reviewIcon\" :src=\"require('@/assets/icons/bad.png')\">\n                <div class=\"reviewText\">{{ consReview.NegativeReviewText }}</div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport * as d3 from 'd3';\nimport cloud from 'd3-cloud';\n\nexport default {\n    props: {\n        items: {\n            type: Object,\n            require: true,\n        }\n    },\n    data() {\n        return {\n            isModal: false,\n            consReviews: [],\n            consKeyWord: '',\n        };\n    },\n    watch: {\n        items: {\n            handler() {\n                this.createWordClouds();\n            },\n            deep: true\n        }\n    },\n    methods: {\n        createWordClouds() {\n            this.createWordCloud('#word-cloud-1', this.items.map(item => ({ text: item.PositiveKeyword, size: item.PositiveRating * 2 })));\n            this.createWordCloud('#word-cloud-2', this.items.map(item => ({ text: item.NegativeKeyword, size: item.NegativeRating * 2 })));\n        },\n        createWordCloud(containerId, words) {\n            const width = window.innerWidth;\n            const height = 400;\n            const layout = cloud()\n                .size([width, height])\n                .words(words)\n                .padding(10)\n                .rotate(() => 0)\n                .font(\"Impact\")\n                .fontSize(d => d.size * 10)\n                .on(\"end\", words => this.draw(containerId, words));\n            layout.start();\n        },\n        draw(containerId, words) {\n            const width = window.innerWidth;\n            const height = 400;\n            const svg = d3.select(containerId).append(\"svg\")\n                .attr(\"width\", width)\n                .attr(\"height\", height)\n                .append(\"g\")\n                .attr(\"transform\", `translate(${width / 2}, ${height / 2})`);\n            svg.selectAll(\"text\")\n                .data(words)\n                .enter().append(\"text\")\n                .style(\"font-size\", d => d.size + \"px\")\n                .style(\"font-family\", \"Impact\")\n                .style(\"fill\", containerId === '#word-cloud-1' ? 'DodgerBlue' : 'Red')\n                .attr(\"text-anchor\", \"middle\")\n                .attr(\"transform\", d => `translate(${[d.x, d.y]})`)\n                .text(function (d) { return d.text; })\n                .style(\"border\", \"1px solid black\")\n                .on(\"click\", (event, d) => {\n                    if (containerId === '#word-cloud-2') {\n                        this.fetchReviews(d.text);\n                        this.isModal = true;\n                    } else {\n                        // 장점 클릭 시 다른 처리\n                        this.$router.push({\n                            name: 'similarItems',\n                            query: { KeyWord: d.text }\n                        });\n                    }\n                })\n        },\n        close() {\n            this.isModal = false;\n        },\n        fetchReviews(text) {\n            this.consKeyWord = text;\n            const getConsKeyWordReviews = `http://192.168.0.213:3000/api/review/getConsKeyWordReviews/`;\n            axios.get(getConsKeyWordReviews, {\n                params: {\n                    \"itemId\": this.$store.state.itemId,\n                    \"keyWord\": text\n                }\n            })\n                .then((response) => {\n                    this.consReviews = response.data.results;\n                    console.log(this.consReviews);\n                })\n                .catch((error) => {\n                    console.error('API 요청 중 오류 발생:', error);\n                    // Consider updating the UI to inform the user about the error\n                });\n        },\n        openModal() {\n            // Logic for opening the modal\n            this.isModal = true;\n            document.body.classList.add('modal-open');\n        },\n\n        closeModal() {\n            // Merged logic for closing the modal\n            this.isModal = false;\n            document.body.classList.remove('modal-open');\n            // Include any additional logic from the duplicated method here\n        },\n    }\n};\n</script>\n\n<style scoped>\nbody.modal-open {\n    overflow: hidden;\n}\n\n.word-cloud-1,\n.word-cloud-2 {\n    width: 100%;\n}\n\n.modal-container {\n    position: relative;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 550px;\n    background: #fff;\n    border-radius: 10px;\n    padding: 20px;\n    box-sizing: border-box;\n}\n\n.rounded-circle {\n    width: 50px;\n    position: fixed;\n    bottom: 60px;\n    right: 30px;\n}\n\n.profile {\n    width: 40px;\n    border-radius: 100%;\n    padding: 5px;\n    background-color: #ccc;\n    margin-right: 10px;\n}\n\n.review {\n    border-bottom: 1px #ccc solid;\n}\n\n.reviewContainer {\n    display: flex;\n    align-items: flex-start;\n}\n\n.reviewIcon {\n    width: 22px;\n    margin-right: 10px;\n}\n\n.reviewText {\n    flex: 1;\n    text-align: start;\n}\n\n.userName {\n    font-weight: bold;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}