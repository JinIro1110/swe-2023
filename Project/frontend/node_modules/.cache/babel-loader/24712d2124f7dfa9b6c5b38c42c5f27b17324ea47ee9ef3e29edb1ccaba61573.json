{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '../assets/icons/backward.png';\nconst _withScopeId = n => (_pushScopeId(\"data-v-21bd57cb\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"word-cloud-container\\\" data-v-21bd57cb><div id=\\\"word-cloud-1\\\" data-v-21bd57cb><div class=\\\"fs-1 fw-bold\\\" data-v-21bd57cb>장점</div></div><div id=\\\"word-cloud-2\\\" data-v-21bd57cb><div class=\\\"fs-1 fw-bold\\\" data-v-21bd57cb>단점</div></div></div>\", 1);\nconst _hoisted_2 = {\n  key: 0,\n  class: \"modal-container\"\n};\nconst _hoisted_3 = {\n  class: \"headMenu container-fluid text-center p-3\"\n};\nconst _hoisted_4 = {\n  class: \"row justify-content-evenly\"\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  class: \"iconWidth\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_6 = [_hoisted_5];\nconst _hoisted_7 = {\n  class: \"col d-flex justify-content-center\",\n  style: {\n    \"font-size\": \"17px\",\n    \"font-weight\": \"lighter\"\n  }\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"col\"\n}, null, -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_hoisted_1, $data.isModal ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", {\n    class: \"col d-flex justify-content-start\",\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.goBack && _ctx.goBack(...args))\n  }, [..._hoisted_6]), _createElementVNode(\"div\", _hoisted_7, _toDisplayString($data.keyWord) + \" 포함 리뷰 \", 1 /* TEXT */), _hoisted_8])]), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.reviews, review => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: review.id\n    }, _toDisplayString(review), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_imports_0","class","_createElementVNode","src","_hoisted_5","style","_hoisted_1","$data","isModal","_createElementBlock","_hoisted_2","_hoisted_3","_hoisted_4","onClick","_cache","args","_ctx","goBack","_hoisted_7","_toDisplayString","keyWord","_hoisted_8","_Fragment","_renderList","reviews","review","key","id"],"sources":["/Users/jinsanghyeok/Desktop/swe-2023/Project/frontend/src/components/WordCloud.vue"],"sourcesContent":["<template>\n    <div class=\"word-cloud-container\">\n        <div id=\"word-cloud-1\">\n            <div class=\"fs-1 fw-bold\">장점</div>\n        </div>\n        <div id=\"word-cloud-2\">\n            <div class=\"fs-1 fw-bold\">단점</div>\n        </div>\n    </div>\n    <div class=\"modal-container\" v-if=\"isModal\">\n        <div class=\"headMenu container-fluid text-center p-3\">\n        <div class=\"row justify-content-evenly\">\n            <div class=\"col d-flex justify-content-start\" @click=\"goBack\">\n                <img src=\"../assets/icons/backward.png\" class=\"iconWidth\">\n            </div>\n            <div class=\"col d-flex justify-content-center\" style=\"font-size: 17px; font-weight: lighter;\">\n                {{ keyWord }} 포함 리뷰\n            </div>\n            <div class=\"col\">\n            </div>\n        </div>\n    </div>\n        <div v-for=\"review in reviews\" :key=\"review.id\">\n            {{ review }}\n        </div>\n    </div>\n</template>\n\n<script>\nimport * as d3 from 'd3';\nimport cloud from 'd3-cloud';\n\nexport default {\n    props: {\n        items: {\n            type: Object,\n            require: true,\n        }\n    },\n    data() {\n        return {\n            isModal: false,\n            reviews: {},\n            keyWord: '',\n        };\n    },\n    watch: {\n        items: {\n            handler() {\n                this.createWordClouds();\n            },\n            deep: true\n        }\n    },\n    methods: {\n        createWordClouds() {\n            this.createWordCloud('#word-cloud-1', this.items.map(item => ({ text: item.PositiveKeyword, size: item.PositiveRating * 2 })));\n            this.createWordCloud('#word-cloud-2', this.items.map(item => ({ text: item.NegativeKeyword, size: item.NegativeRating * 2 })));\n        },\n        createWordCloud(containerId, words) {\n            const width = window.innerWidth;\n            const height = 400;\n            const layout = cloud()\n                .size([width, height])\n                .words(words)\n                .padding(10)\n                .rotate(() => 0)\n                .font(\"Impact\")\n                .fontSize(d => d.size * 10)\n                .on(\"end\", words => this.draw(containerId, words));\n            layout.start();\n        },\n        draw(containerId, words) {\n            const width = window.innerWidth;\n            const height = 400;\n            const svg = d3.select(containerId).append(\"svg\")\n                .attr(\"width\", width)\n                .attr(\"height\", height)\n                .append(\"g\")\n                .attr(\"transform\", `translate(${width / 2}, ${height / 2})`);\n            svg.selectAll(\"text\")\n                .data(words)\n                .enter().append(\"text\")\n                .style(\"font-size\", d => d.size + \"px\")\n                .style(\"font-family\", \"Impact\")\n                .style(\"fill\", containerId === '#word-cloud-1' ? 'DodgerBlue' : 'Red')\n                .attr(\"text-anchor\", \"middle\")\n                .attr(\"transform\", d => `translate(${[d.x, d.y]})`)\n                .text(function (d) { return d.text; })\n                .style(\"border\", \"1px solid black\")\n                .on(\"click\", (event, d) => {\n                    if (containerId === '#word-cloud-2') {\n                        this.fetchReviews(d.text);\n                        this.isModal = true;\n                    } else {\n                        // 장점 클릭 시 다른 처리\n                        this.$router.push({\n                            name: 'similarItems',\n                            query: { keyWord: d.text }\n                        });\n                    }\n                })\n        },\n        fetchReviews(text) {\n            this.keyWord = text;\n            const getConsKeyWordReviews = `http://192.168.0.213:3000/api/item/getConsKeyWordReviews/`;\n            axios.get(getConsKeyWordReviews, {\n                params: {\n                    \"itemId\": this.$store.state.itemId,\n                    \"keyWord\": text\n                }\n            })\n                .then((response) => {\n                    this.reviews = response.data.reviews;  // Update this line\n                })\n                .catch((error) => {\n                    console.error('API 요청 중 오류 발생:', error);\n                    // Consider updating the UI to inform the user about the error\n                });\n        },\n    }\n};\n</script>\n\n<style scoped>\n.word-cloud-1,\n.word-cloud-2 {\n    width: 100%;\n}\n</style>\n"],"mappings":";OAaqBA,UAAkC;;;;;EAJ9CC,KAAK,EAAC;;;EACFA,KAAK,EAAC;AAA0C;;EAChDA,KAAK,EAAC;AAA4B;gEAE/BC,mBAAA,CAA0D;EAArDC,GAAkC,EAAlCH,UAAkC;EAACC,KAAK,EAAC;;oBAA9CG,UAA0D,C;;EAEzDH,KAAK,EAAC,mCAAmC;EAACI,KAA8C,EAA9C;IAAA;IAAA;EAAA;;gEAG/CH,mBAAA,CACM;EADDD,KAAK,EAAC;AAAK;;;6DAjBxBK,UAOM,EAC6BC,KAAA,CAAAC,OAAO,I,cAA1CC,mBAAA,CAgBM,OAhBNC,UAgBM,GAfFR,mBAAA,CAWE,OAXFS,UAWE,GAVFT,mBAAA,CASM,OATNU,UASM,GARFV,mBAAA,CAEM;IAFDD,KAAK,EAAC,kCAAkC;IAAEY,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,IAAA,CAAAC,MAAA,IAAAD,IAAA,CAAAC,MAAA,IAAAF,IAAA,CAAM;uBAG5Db,mBAAA,CAEM,OAFNgB,UAEM,EAAAC,gBAAA,CADCZ,KAAA,CAAAa,OAAO,IAAG,SACjB,iBACAC,UACM,C,wBAGVZ,mBAAA,CAEMa,SAAA,QAAAC,WAAA,CAFgBhB,KAAA,CAAAiB,OAAO,EAAjBC,MAAM;yBAAlBhB,mBAAA,CAEM;MAF0BiB,GAAG,EAAED,MAAM,CAACE;wBACrCF,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}