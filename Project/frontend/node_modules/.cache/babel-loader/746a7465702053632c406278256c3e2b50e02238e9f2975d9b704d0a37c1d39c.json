{"ast":null,"code":"import axios from 'axios';\nimport * as d3 from 'd3';\nimport cloud from 'd3-cloud';\nexport default {\n  name: 'WordCloud',\n  data() {\n    return {\n      items: {}\n    };\n  },\n  mounted() {\n    const getKeyword = `http://192.168.0.213:3000/api/review/getKeyword/${this.$store.state.itemId}`;\n    axios.get(getKeyword).then(response => {\n      this.items = response.data;\n      console.log(this.items);\n      this.createWordCloud('#word-cloud-1', this.items.Pros.map(item => ({\n        text: item.keyword,\n        size: item.rating * 70\n      })));\n      this.createWordCloud('#word-cloud-2', this.items.Cons.map(item => ({\n        text: item[0],\n        size: item[1] * 70\n      })));\n    }).catch(error => {\n      console.error('API 요청 중 오류 발생:', error);\n    });\n  },\n  methods: {\n    createWordCloud(containerId, words) {\n      const layout = cloud().size([200, 200]) // 클라우드 크기 설정\n      .words(words).padding(10) // 단어 간 겹침 방지를 위한 패딩\n      .rotate(() => 0) // 모든 단어를 가로 방향으로 설정\n      .font(\"Impact\").fontSize(d => d.size * 10) // 폰트 크기를 rating에 비례하게 설정\n      .on(\"end\", words => this.draw(containerId, words));\n      layout.start();\n    },\n    draw(containerId, words) {\n      const svg = d3.select(containerId).append(\"svg\").attr(\"width\", 250).attr(\"height\", 250).append(\"g\").attr(\"transform\", \"translate(100,100)\");\n      svg.selectAll(\"text\").data(words).enter().append(\"text\").style(\"font-size\", d => d.size + \"px\").style(\"font-family\", \"Impact\").style(\"fill\", containerId === '#word-cloud-1' ? 'DodgerBlue' : 'Red').attr(\"text-anchor\", \"middle\").attr(\"transform\", d => `translate(${[d.x, d.y]})`).text(d => d.text).style(\"border\", \"1px solid black\");\n    }\n  }\n};","map":{"version":3,"names":["axios","d3","cloud","name","data","items","mounted","getKeyword","$store","state","itemId","get","then","response","console","log","createWordCloud","Pros","map","item","text","keyword","size","rating","Cons","catch","error","methods","containerId","words","layout","padding","rotate","font","fontSize","d","on","draw","start","svg","select","append","attr","selectAll","enter","style","x","y"],"sources":["/Users/jinsanghyeok/Desktop/swe-2023/Project/frontend/src/components/WordCloud.vue"],"sourcesContent":["<template>\n    <div class=\"word-cloud-container\">\n        <div id=\"word-cloud-1\">\n            <div class=\"fs-1 fw-bold\">장점</div>\n        </div>\n        <div id=\"word-cloud-2\">\n            <div class=\"fs-1 fw-bold\">단점</div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport * as d3 from 'd3';\nimport cloud from 'd3-cloud';\n\nexport default {\n    name: 'WordCloud',\n    data() {\n        return {\n            items: {\n            }\n        };\n    },\n    mounted() {\n        const getKeyword = `http://192.168.0.213:3000/api/review/getKeyword/${this.$store.state.itemId}`;\n        axios.get(getKeyword)\n            .then((response) => {\n                this.items = response.data;\n                console.log(this.items);\n                this.createWordCloud('#word-cloud-1', this.items.Pros.map(item => ({ text: item.keyword, size: item.rating * 70 })));\n                this.createWordCloud('#word-cloud-2', this.items.Cons.map(item => ({ text: item[0], size: item[1] * 70 })));\n            })\n            .catch((error) => {\n                console.error('API 요청 중 오류 발생:', error);\n            });\n\n    },\n    methods: {\n        createWordCloud(containerId, words) {\n            const layout = cloud()\n                .size([200, 200]) // 클라우드 크기 설정\n                .words(words)\n                .padding(10) // 단어 간 겹침 방지를 위한 패딩\n                .rotate(() => 0) // 모든 단어를 가로 방향으로 설정\n                .font(\"Impact\")\n                .fontSize(d => d.size * 10) // 폰트 크기를 rating에 비례하게 설정\n                .on(\"end\", words => this.draw(containerId, words));\n            layout.start();\n        },\n        draw(containerId, words) {\n            const svg = d3.select(containerId).append(\"svg\")\n                .attr(\"width\", 250)\n                .attr(\"height\", 250)\n                .append(\"g\")\n                .attr(\"transform\", \"translate(100,100)\");\n\n            svg.selectAll(\"text\")\n                .data(words)\n                .enter().append(\"text\")\n                .style(\"font-size\", d => d.size + \"px\")\n                .style(\"font-family\", \"Impact\")\n                .style(\"fill\", containerId === '#word-cloud-1' ? 'DodgerBlue' : 'Red')\n                .attr(\"text-anchor\", \"middle\")\n                .attr(\"transform\", d => `translate(${[d.x, d.y]})`)\n                .text(d => d.text)\n                .style(\"border\", \"1px solid black\");\n        }\n    }\n};\n</script>\n\n<style scoped>\n.word-cloud-1,\n.word-cloud-2 {\n    width: 100%;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}